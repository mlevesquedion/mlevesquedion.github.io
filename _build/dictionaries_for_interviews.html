<h1 id="special-python-dictionaries-for-interviews-among-other-things">Special Python Dictionaries (for Interviews, among other things)</h1>
<p>When in a coding interview, the last thing you want to do is waste time and energy writing boilerplate code (which is probably why you’re using Python in the first place). Read on to learn about two data structures from the <code>collections</code> module that will help you implement your solution faster, and maybe impress your interviewer with your knowledge of the standard library.</p>
<h2 id="defaultdict">defaultdict</h2>
<p>Dictionaries are ubiquitous in Python, and a staple in interview questions. Often times though, we end up writing boilerplate such as this :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># d = dict()</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="cf">if</span> key <span class="kw">not</span> <span class="kw">in</span> d:</a>
<a class="sourceLine" id="cb1-4" title="4">  d[key] <span class="op">=</span> []</a>
<a class="sourceLine" id="cb1-5" title="5">d[key].append(x)</a></code></pre></div>
<p>Or even exotic things such as this :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># d = dict()</span></a>
<a class="sourceLine" id="cb2-2" title="2">d.setdefault(key, []).append(x)</a></code></pre></div>
<p>We can simplify the code by using a <code>defaultdict</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># d = defaultdict(list)</span></a>
<a class="sourceLine" id="cb3-2" title="2">d[key].append(x)</a></code></pre></div>
<p>The argument given to defaultdict’s constructor is a zero-argument factory function used to initialize missing elements. If you wanted to count word frequencies in a text, you might use a <code>defaultdict(int)</code>. However, there is a more specialized data structure for such occasions…</p>
<h2 id="counter">Counter</h2>
<p>On the surface, <code>Counter</code> is just a <code>defauldict(int)</code>. However, it supports additional operations, such as returning the <code>n</code> most common elements, and it can act as a <code>multiset</code>, meaning you can get the intersection, difference or union of two <code>Counters</code>. For example, you could find the total number of occurrences of each word across two texts using <code>Counter(text1) | Counter(text2)</code>.</p>
<h3 id="bonus-data-structure-deque">Bonus data structure : deque</h3>
<p>What is wrong with the following piece of code, in terms of time complexity?</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">def</span> bfs(graph, start_node):</a>
<a class="sourceLine" id="cb4-2" title="2">  seen <span class="op">=</span> {start_node}</a>
<a class="sourceLine" id="cb4-3" title="3">  queue <span class="op">=</span> [start_node]</a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="cf">while</span> queue:</a>
<a class="sourceLine" id="cb4-5" title="5">    current <span class="op">=</span> queue.pop(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="cf">for</span> neighbor <span class="kw">in</span> graph[current]:</a>
<a class="sourceLine" id="cb4-7" title="7">      <span class="cf">if</span> neighbor <span class="kw">not</span> <span class="kw">in</span> seen:</a>
<a class="sourceLine" id="cb4-8" title="8">        queue.append(neighbor)</a></code></pre></div>
<p>Before you proudly announce to your interviewer that this runs in O(n + m), recall that popping the first element from a Python <code>list</code> requires <code>|list|</code> operations. Therefore this code actually runs in O(n^2).</p>
<p>How can you fix this? Use <code>collections.deque</code>, which is implemented as a <em>linked list</em> and therefore has O(1) insertions and <em>removals</em> at both extremities. (the equivalent to <code>pop(0)</code> is simply <code>popleft()</code>, and there is also an <code>appendleft</code> method).</p>
